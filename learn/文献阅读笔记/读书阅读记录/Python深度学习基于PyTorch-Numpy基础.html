<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>NumPy基础 | Coderyzh的博客</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/blog/logo.jpg">
    <meta name="description" content="冲鸭！">
    
    <link rel="preload" href="/blog/assets/css/0.styles.9a55a594.css" as="style"><link rel="preload" href="/blog/assets/js/app.a8766d76.js" as="script"><link rel="preload" href="/blog/assets/js/2.7533f6e6.js" as="script"><link rel="preload" href="/blog/assets/js/90.9088e008.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.885c6e23.js"><link rel="prefetch" href="/blog/assets/js/11.ffa3d654.js"><link rel="prefetch" href="/blog/assets/js/12.2ea34cef.js"><link rel="prefetch" href="/blog/assets/js/13.e20da210.js"><link rel="prefetch" href="/blog/assets/js/14.88d3e5c6.js"><link rel="prefetch" href="/blog/assets/js/15.fa0e7cb3.js"><link rel="prefetch" href="/blog/assets/js/16.10f56bfd.js"><link rel="prefetch" href="/blog/assets/js/17.e7f7036a.js"><link rel="prefetch" href="/blog/assets/js/18.0a46a51c.js"><link rel="prefetch" href="/blog/assets/js/19.3a71ffa9.js"><link rel="prefetch" href="/blog/assets/js/20.6dd9f744.js"><link rel="prefetch" href="/blog/assets/js/21.363db7c8.js"><link rel="prefetch" href="/blog/assets/js/22.85b912f6.js"><link rel="prefetch" href="/blog/assets/js/23.e1c78269.js"><link rel="prefetch" href="/blog/assets/js/24.87712464.js"><link rel="prefetch" href="/blog/assets/js/25.01d111c9.js"><link rel="prefetch" href="/blog/assets/js/26.5384d46a.js"><link rel="prefetch" href="/blog/assets/js/27.06a77ce7.js"><link rel="prefetch" href="/blog/assets/js/28.dee28251.js"><link rel="prefetch" href="/blog/assets/js/29.8735c1bd.js"><link rel="prefetch" href="/blog/assets/js/3.d2a5d2b1.js"><link rel="prefetch" href="/blog/assets/js/30.e01f8138.js"><link rel="prefetch" href="/blog/assets/js/31.f006e3c9.js"><link rel="prefetch" href="/blog/assets/js/32.ba3efeab.js"><link rel="prefetch" href="/blog/assets/js/33.9c85da1b.js"><link rel="prefetch" href="/blog/assets/js/34.991fc479.js"><link rel="prefetch" href="/blog/assets/js/35.77a02eab.js"><link rel="prefetch" href="/blog/assets/js/36.8c000e42.js"><link rel="prefetch" href="/blog/assets/js/37.c7e4dcad.js"><link rel="prefetch" href="/blog/assets/js/38.9c8583e2.js"><link rel="prefetch" href="/blog/assets/js/39.f78da62b.js"><link rel="prefetch" href="/blog/assets/js/4.bf5a800a.js"><link rel="prefetch" href="/blog/assets/js/40.7e03ec5e.js"><link rel="prefetch" href="/blog/assets/js/41.0e2cafc7.js"><link rel="prefetch" href="/blog/assets/js/42.c82482dd.js"><link rel="prefetch" href="/blog/assets/js/43.f1609a1d.js"><link rel="prefetch" href="/blog/assets/js/44.1e8bad32.js"><link rel="prefetch" href="/blog/assets/js/45.c3f3857d.js"><link rel="prefetch" href="/blog/assets/js/46.d18b5371.js"><link rel="prefetch" href="/blog/assets/js/47.be4f4a89.js"><link rel="prefetch" href="/blog/assets/js/48.dfcceb94.js"><link rel="prefetch" href="/blog/assets/js/49.7d93d048.js"><link rel="prefetch" href="/blog/assets/js/5.7365f518.js"><link rel="prefetch" href="/blog/assets/js/50.1df2a5f5.js"><link rel="prefetch" href="/blog/assets/js/51.adcdc2be.js"><link rel="prefetch" href="/blog/assets/js/52.f6515f82.js"><link rel="prefetch" href="/blog/assets/js/53.095ddcba.js"><link rel="prefetch" href="/blog/assets/js/54.eaa84284.js"><link rel="prefetch" href="/blog/assets/js/55.b703f464.js"><link rel="prefetch" href="/blog/assets/js/56.c92ce5f3.js"><link rel="prefetch" href="/blog/assets/js/57.fd601ef9.js"><link rel="prefetch" href="/blog/assets/js/58.82d39220.js"><link rel="prefetch" href="/blog/assets/js/59.61dd1284.js"><link rel="prefetch" href="/blog/assets/js/6.f942c28c.js"><link rel="prefetch" href="/blog/assets/js/60.4af561a9.js"><link rel="prefetch" href="/blog/assets/js/61.7e8ed391.js"><link rel="prefetch" href="/blog/assets/js/62.1b129d44.js"><link rel="prefetch" href="/blog/assets/js/63.1e8d0aea.js"><link rel="prefetch" href="/blog/assets/js/64.19d67993.js"><link rel="prefetch" href="/blog/assets/js/65.745f941d.js"><link rel="prefetch" href="/blog/assets/js/66.9cb5dd0f.js"><link rel="prefetch" href="/blog/assets/js/67.ee361403.js"><link rel="prefetch" href="/blog/assets/js/68.24bd88ba.js"><link rel="prefetch" href="/blog/assets/js/69.6fdc256e.js"><link rel="prefetch" href="/blog/assets/js/7.85e210d5.js"><link rel="prefetch" href="/blog/assets/js/70.23607091.js"><link rel="prefetch" href="/blog/assets/js/71.fdfa3eb3.js"><link rel="prefetch" href="/blog/assets/js/72.4cc9b63f.js"><link rel="prefetch" href="/blog/assets/js/73.63bde3dc.js"><link rel="prefetch" href="/blog/assets/js/74.903eb92e.js"><link rel="prefetch" href="/blog/assets/js/75.94c5054f.js"><link rel="prefetch" href="/blog/assets/js/76.e626847b.js"><link rel="prefetch" href="/blog/assets/js/77.72e060da.js"><link rel="prefetch" href="/blog/assets/js/78.0baed4f6.js"><link rel="prefetch" href="/blog/assets/js/79.5954565b.js"><link rel="prefetch" href="/blog/assets/js/8.baf7966e.js"><link rel="prefetch" href="/blog/assets/js/80.c7a4a11c.js"><link rel="prefetch" href="/blog/assets/js/81.813b9331.js"><link rel="prefetch" href="/blog/assets/js/82.eb753c9b.js"><link rel="prefetch" href="/blog/assets/js/83.14a3f24e.js"><link rel="prefetch" href="/blog/assets/js/84.cbf28e40.js"><link rel="prefetch" href="/blog/assets/js/85.5fc0e4b4.js"><link rel="prefetch" href="/blog/assets/js/86.66768a8e.js"><link rel="prefetch" href="/blog/assets/js/87.ef19bf66.js"><link rel="prefetch" href="/blog/assets/js/88.b1aac405.js"><link rel="prefetch" href="/blog/assets/js/89.4aa0624d.js"><link rel="prefetch" href="/blog/assets/js/9.b07dbdb4.js"><link rel="prefetch" href="/blog/assets/js/91.9f86ae39.js"><link rel="prefetch" href="/blog/assets/js/92.526f6f0a.js"><link rel="prefetch" href="/blog/assets/js/93.4a0668ae.js"><link rel="prefetch" href="/blog/assets/js/94.6d97004d.js"><link rel="prefetch" href="/blog/assets/js/95.2988fcde.js"><link rel="prefetch" href="/blog/assets/js/96.83fccfac.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.9a55a594.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><!----> <span class="site-name">Coderyzh的博客</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/blog/learn/学习汇报记录/第一周学习汇报记录2021-9-19.html" class="nav-link">
  研路之行
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工具箱" class="dropdown-title"><span class="title">工具箱</span> <span class="arrow down"></span></button> <button type="button" aria-label="工具箱" class="mobile-dropdown-title"><span class="title">工具箱</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          在线编辑
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://tinypng.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  图片压缩
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>
          在线服务
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://www.aliyun.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  阿里云
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://cloud.tencent.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  腾讯云
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>
          博客指南
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://juejin.im/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  掘金
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://blog.csdn.net/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  CSDN
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/blog/learn/学习汇报记录/第一周学习汇报记录2021-9-19.html" class="nav-link">
  研路之行
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工具箱" class="dropdown-title"><span class="title">工具箱</span> <span class="arrow down"></span></button> <button type="button" aria-label="工具箱" class="mobile-dropdown-title"><span class="title">工具箱</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          在线编辑
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://tinypng.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  图片压缩
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>
          在线服务
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://www.aliyun.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  阿里云
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://cloud.tencent.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  腾讯云
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>
          博客指南
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://juejin.im/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  掘金
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://blog.csdn.net/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  CSDN
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>学习汇报记录</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>课程学习记录</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>文献阅读笔记</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>论文学习记录</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>读书阅读记录</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-2"><p class="sidebar-heading"><span>数据挖掘概念与技术</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-2"><p class="sidebar-heading open"><span>Python深度学习基于PyTorch</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/learn/文献阅读笔记/读书阅读记录/Python深度学习基于PyTorch-Numpy基础.html" class="active sidebar-link">NumPy基础</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/learn/文献阅读笔记/读书阅读记录/Python深度学习基于PyTorch-Numpy基础.html#_1-1-生成numpy数组" class="sidebar-link">1.1 生成NumPy数组</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/learn/文献阅读笔记/读书阅读记录/Python深度学习基于PyTorch-Numpy基础.html#_1-1-1-从已有数据中创建数组" class="sidebar-link">1.1.1 从已有数据中创建数组</a></li><li class="sidebar-sub-header"><a href="/blog/learn/文献阅读笔记/读书阅读记录/Python深度学习基于PyTorch-Numpy基础.html#_1-1-2-利用-random-模块生成数组" class="sidebar-link">1.1.2 利用 random 模块生成数组</a></li><li class="sidebar-sub-header"><a href="/blog/learn/文献阅读笔记/读书阅读记录/Python深度学习基于PyTorch-Numpy基础.html#_1-1-3-创建特定形状的多维数组" class="sidebar-link">1.1.3 创建特定形状的多维数组</a></li><li class="sidebar-sub-header"><a href="/blog/learn/文献阅读笔记/读书阅读记录/Python深度学习基于PyTorch-Numpy基础.html#_1-1-4-利用-arange、linspace-函数生成数组" class="sidebar-link">1.1.4 利用 arange、linspace 函数生成数组</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/learn/文献阅读笔记/读书阅读记录/Python深度学习基于PyTorch-Numpy基础.html#_1-2-获取元素" class="sidebar-link">1.2 获取元素</a></li><li class="sidebar-sub-header"><a href="/blog/learn/文献阅读笔记/读书阅读记录/Python深度学习基于PyTorch-Numpy基础.html#_1-3-numpy的算术运算" class="sidebar-link">1.3 NumPy的算术运算</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/learn/文献阅读笔记/读书阅读记录/Python深度学习基于PyTorch-Numpy基础.html#_1-3-1对应元素相乘" class="sidebar-link">1.3.1对应元素相乘</a></li><li class="sidebar-sub-header"><a href="/blog/learn/文献阅读笔记/读书阅读记录/Python深度学习基于PyTorch-Numpy基础.html#_1-3-2-点积运算" class="sidebar-link">1.3.2 点积运算</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/learn/文献阅读笔记/读书阅读记录/Python深度学习基于PyTorch-Numpy基础.html#_1-4-数组变形" class="sidebar-link">1.4 数组变形</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/learn/文献阅读笔记/读书阅读记录/Python深度学习基于PyTorch-Numpy基础.html#_1-4-1-更改数组的形状" class="sidebar-link">1.4.1 更改数组的形状</a></li><li class="sidebar-sub-header"><a href="/blog/learn/文献阅读笔记/读书阅读记录/Python深度学习基于PyTorch-Numpy基础.html#_1-4-2-合并数组" class="sidebar-link">1.4.2 合并数组</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/learn/文献阅读笔记/读书阅读记录/Python深度学习基于PyTorch-Numpy基础.html#_1-5-批量处理" class="sidebar-link">1.5 批量处理</a></li><li class="sidebar-sub-header"><a href="/blog/learn/文献阅读笔记/读书阅读记录/Python深度学习基于PyTorch-Numpy基础.html#_1-6-通用函数" class="sidebar-link">1.6 通用函数</a></li><li class="sidebar-sub-header"><a href="/blog/learn/文献阅读笔记/读书阅读记录/Python深度学习基于PyTorch-Numpy基础.html#_1-7-广播机制" class="sidebar-link">1.7 广播机制</a></li></ul></li><li><a href="/blog/learn/文献阅读笔记/读书阅读记录/Python深度学习基于PyTorch-PyTorch基础.html" class="sidebar-link">PyTorch基础</a></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-2"><p class="sidebar-heading"><span>动手学深度学习</span> <span class="arrow right"></span></p> <!----></section></li></ul></section></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>名词解释</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>生活琐碎</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="numpy基础"><a href="#numpy基础" class="header-anchor">#</a> NumPy基础</h1> <h2 id="_1-1-生成numpy数组"><a href="#_1-1-生成numpy数组" class="header-anchor">#</a> 1.1 生成NumPy数组</h2> <p>NumPy是Python的外部库，不在标准库中。因此，若要使用它，需要先导入NumPy。</p> <h3 id="_1-1-1-从已有数据中创建数组"><a href="#_1-1-1-从已有数据中创建数组" class="header-anchor">#</a> 1.1.1 从已有数据中创建数组</h3> <p>直接对 Python 的基础数据类型(如列表、元组等) 进行转换来生成 ndarray:
（1）将列表转换成 ndarray</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code>lst1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">3.14</span><span class="token punctuation">,</span> <span class="token number">2.17</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span>
nd1 <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span>lst1<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>nd1<span class="token punctuation">)</span>  <span class="token comment"># [3.14 2.17 0.   1.   2.  ]</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">type</span><span class="token punctuation">(</span>nd1<span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># &lt;class 'numpy.ndarray'&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>（2）嵌套列表可以转换成多维 ndarray</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code>lst2 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">3.14</span><span class="token punctuation">,</span> <span class="token number">2.17</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
nd2 <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span>lst2<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>nd2<span class="token punctuation">)</span>
<span class="token comment"># [[3.14 2.17 0.   1.   2.  ]</span>
<span class="token comment"># [1.   2.   3.   4.   5.  ]]</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">type</span><span class="token punctuation">(</span>nd2<span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># &lt;class 'numpy.ndarray'&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>如果把上面示例中的列表换成<strong>元组</strong>也同样适合。</p> <h3 id="_1-1-2-利用-random-模块生成数组"><a href="#_1-1-2-利用-random-模块生成数组" class="header-anchor">#</a> 1.1.2 利用 random 模块生成数组</h3> <p><code>np.random</code>模块常用函数:
<img src="/blog/PyTorch_Learn/numpy-1.jpg" alt="mixureSecure"></p> <ul><li><code>np.random.random</code>生成0到1的随机数</li> <li><code>np.random.seed</code> 设置随机数种子，得到一个初始固定的随机数。随机种子的初始值，是一直不变的</li> <li><code>np.random.randn</code>生成标准正态分布的随机数</li></ul> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token comment"># np.random.random生成0到1的随机数</span>
nd3 <span class="token operator">=</span> np<span class="token punctuation">.</span>random<span class="token punctuation">.</span>random<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>nd3<span class="token punctuation">)</span>
<span class="token comment"># [[0.65595249 0.20354926 0.54825359]</span>
<span class="token comment">#  [0.83860111 0.10907328 0.35716768]</span>
<span class="token comment">#  [0.06336382 0.12770074 0.72671587]]</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'nd3的形状是:'</span><span class="token punctuation">,</span> nd3<span class="token punctuation">.</span>shape<span class="token punctuation">)</span>  <span class="token comment"># nd3的形状是: (3, 3)</span>

<span class="token comment"># np.random.random生成0到1的随机数</span>
<span class="token comment"># np.random.seed 设置随机数种子，得到一个初始固定的随机数。随机种子的初始值，是一直不变的</span>
<span class="token comment"># np.random.randn生成标准正态分布的随机数</span>
np<span class="token punctuation">.</span>random<span class="token punctuation">.</span>seed<span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span>
nd4 <span class="token operator">=</span> np<span class="token punctuation">.</span>random<span class="token punctuation">.</span>randn<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>nd4<span class="token punctuation">)</span>
<span class="token comment"># [[-1.0856306   0.99734545  0.2829785 ]</span>
<span class="token comment">#  [-1.50629471 -0.57860025  1.65143654]]</span>
np<span class="token punctuation">.</span>random<span class="token punctuation">.</span>shuffle<span class="token punctuation">(</span>nd4<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'随机打乱后数据：\n'</span><span class="token punctuation">,</span> nd4<span class="token punctuation">)</span>
<span class="token comment"># [[-1.50629471 - 0.57860025  1.65143654]</span>
<span class="token comment">#  [-1.0856306   0.99734545  0.2829785]]</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">type</span><span class="token punctuation">(</span>nd4<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><h3 id="_1-1-3-创建特定形状的多维数组"><a href="#_1-1-3-创建特定形状的多维数组" class="header-anchor">#</a> 1.1.3 创建特定形状的多维数组</h3> <p>NumPy 数组创建函数:</p> <img src="/blog/PyTorch_Learn/numpy-2.jpg" alt="mixureSecure"> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token comment"># 生成全是0的3x3矩阵</span>
nd5 <span class="token operator">=</span> np<span class="token punctuation">.</span>zeros<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token comment"># 生成与nd5一样形状的全0矩阵</span>
np<span class="token punctuation">.</span>zeros_like<span class="token punctuation">(</span>nd5<span class="token punctuation">)</span>

<span class="token comment"># 生成全是1的3x3矩阵</span>
nd6 <span class="token operator">=</span> np<span class="token punctuation">.</span>ones<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token comment"># 生成3阶的单位矩阵</span>
nd7 <span class="token operator">=</span> np<span class="token punctuation">.</span>eye<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>

<span class="token comment"># 生成3阶的对角矩阵</span>
nd8 <span class="token operator">=</span> np<span class="token punctuation">.</span>diag<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>nd5<span class="token punctuation">)</span>
<span class="token comment"># [[0. 0. 0.]</span>
<span class="token comment">#  [0. 0. 0.]</span>
<span class="token comment">#  [0. 0. 0.]]</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>nd6<span class="token punctuation">)</span>
<span class="token comment"># [[1. 1. 1.]</span>
<span class="token comment">#  [1. 1. 1.]</span>
<span class="token comment">#  [1. 1. 1.]]</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>nd7<span class="token punctuation">)</span>
<span class="token comment"># [[1. 0. 0.]</span>
<span class="token comment">#  [0. 1. 0.]</span>
<span class="token comment">#  [0. 0. 1.]]</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>nd8<span class="token punctuation">)</span>
<span class="token comment"># [[1 0 0]</span>
<span class="token comment">#  [0 2 0]</span>
<span class="token comment">#  [0 0 3]]</span>

<span class="token comment"># 生成一个5x5的数值范围在(0,1)的矩阵</span>
nd9 <span class="token operator">=</span> np<span class="token punctuation">.</span>random<span class="token punctuation">.</span>random<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment"># 将生成的nd9的数据保存至文件test1.txt，会在当前同级目录下生成对应的test1.txt文件</span>
np<span class="token punctuation">.</span>savetxt<span class="token punctuation">(</span>X<span class="token operator">=</span>nd9<span class="token punctuation">,</span> fname<span class="token operator">=</span><span class="token string">'./test1.txt'</span><span class="token punctuation">)</span>
<span class="token comment"># 加载test1.txt文件的内容至nd10中</span>
nd10 <span class="token operator">=</span> np<span class="token punctuation">.</span>loadtxt<span class="token punctuation">(</span><span class="token string">'./test1.txt'</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>nd10<span class="token punctuation">)</span>
<span class="token comment"># [[0.41092437 0.5796943  0.13995076 0.40101756 0.62731701]</span>
<span class="token comment">#  [0.32415089 0.24475928 0.69475518 0.5939024  0.63179202]</span>
<span class="token comment">#  [0.44025718 0.08372648 0.71233018 0.42786349 0.2977805 ]</span>
<span class="token comment">#  [0.49208478 0.74029639 0.35772892 0.41720995 0.65472131]</span>
<span class="token comment">#  [0.37380143 0.23451288 0.98799529 0.76599595 0.77700444]]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br></div></div><h3 id="_1-1-4-利用-arange、linspace-函数生成数组"><a href="#_1-1-4-利用-arange、linspace-函数生成数组" class="header-anchor">#</a> 1.1.4 利用 arange、linspace 函数生成数组</h3> <ul><li><code>arrange</code>的格式：<code>arange([start,],stop[,step,],dtype=None)</code> <code>start,stop</code>用指定<strong>范围</strong>，<code>step</code>用来设定<strong>步长</strong>，步长可以为<strong>小数</strong>，类似于内置函数<code>range</code></li></ul> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">print</span><span class="token punctuation">(</span>np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment"># [0 1 2 3 4 5 6 7 8 9]</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment"># [0 1 2 3 4 5 6 7 8 9]</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment"># [1.  1.5 2.  2.5 3.  3.5]</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment"># [9 8 7 6 5 4 3 2 1 0]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><ul><li><code>linspace</code>的格式：
<code>np.linspace(start,stop,num=50,endpoint=True,retstrp=False,dtype=None)</code>
根据输入的指定数据范围以及等份数量，自动生成一个线性等分向量
其中<code>endpoint</code> (包含终点)默认为 <code>True</code>，等分数量<code>num</code>默认为 <code>50</code>。
如果将<code>retstep</code>设置为 <code>True</code>，则会返回一个带步长的 <code>ndarray</code></li></ul> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">print</span><span class="token punctuation">(</span>np<span class="token punctuation">.</span>linspace<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment"># [0.         0.11111111 0.22222222 0.33333333 0.44444444 0.55555556</span>
<span class="token comment">#  0.66666667 0.77777778 0.88888889 1.        ]</span>
<span class="token triple-quoted-string string">'''
因为 linspace 必定会包含数据起点和终点，那么其步长则为(1-0) / 9 = 0.11111111
'''</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>np<span class="token punctuation">.</span>linspace<span class="token punctuation">(</span><span class="token number">0.1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment"># [0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1. ]</span>

<span class="token comment"># 创建一个由区间 [10^1,10^2] 内的 10 个对数间距点组成的向量</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>np<span class="token punctuation">.</span>logspace<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment"># [ 10.          12.91549665  16.68100537  21.5443469   27.82559402</span>
<span class="token comment">#   35.93813664  46.41588834  59.94842503  77.42636827 100.        ]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h2 id="_1-2-获取元素"><a href="#_1-2-获取元素" class="header-anchor">#</a> 1.2 获取元素</h2> <ul><li>通过指定<strong>索引标签</strong>来实现获取数组中的部分元素</li></ul> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
<span class="token keyword">from</span> numpy <span class="token keyword">import</span> random <span class="token keyword">as</span> nr

np<span class="token punctuation">.</span>random<span class="token punctuation">.</span>seed<span class="token punctuation">(</span><span class="token number">2019</span><span class="token punctuation">)</span>
nd11 <span class="token operator">=</span> np<span class="token punctuation">.</span>random<span class="token punctuation">.</span>random<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>nd11<span class="token punctuation">)</span>
<span class="token comment"># [0.90348221 0.39308051 0.62396996 0.6378774  0.88049907 0.29917202</span>
<span class="token comment">#  0.70219827 0.90320616 0.88138193 0.4057498 ]</span>

<span class="token comment"># 获取指定位置的数据，获取第4个元素</span>
x <span class="token operator">=</span> nd11<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'nd11[3]:'</span><span class="token punctuation">,</span> x<span class="token punctuation">)</span>  <span class="token comment"># nd11[3]: 0.6378774010222266</span>

<span class="token comment"># 截取一段数据</span>
x <span class="token operator">=</span> nd11<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">:</span><span class="token number">6</span><span class="token punctuation">]</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'nd11[3:6]:'</span><span class="token punctuation">,</span> x<span class="token punctuation">)</span>  <span class="token comment"># nd11[3:6]: [0.6378774  0.88049907 0.29917202]</span>

<span class="token comment"># 截取固定间隔数据</span>
x <span class="token operator">=</span> nd11<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token number">6</span><span class="token punctuation">:</span><span class="token number">2</span><span class="token punctuation">]</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'nd11[1:6:2]'</span><span class="token punctuation">,</span> x<span class="token punctuation">)</span>  <span class="token comment"># nd11[1:6:2] [0.39308051 0.6378774  0.29917202]</span>

<span class="token comment"># 倒序取数</span>
x <span class="token operator">=</span> nd11<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">]</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'nd11[::-2]'</span><span class="token punctuation">,</span> x<span class="token punctuation">)</span>  <span class="token comment"># nd11[::-2] [0.4057498  0.90320616 0.29917202 0.6378774  0.39308051]</span>

nd12 <span class="token operator">=</span> np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token number">25</span><span class="token punctuation">)</span><span class="token punctuation">.</span>reshape<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>nd12<span class="token punctuation">)</span>
<span class="token comment"># [[ 0  1  2  3  4]</span>
<span class="token comment">#  [ 5  6  7  8  9]</span>
<span class="token comment">#  [10 11 12 13 14]</span>
<span class="token comment">#  [15 16 17 18 19]</span>
<span class="token comment">#  [20 21 22 23 24]]</span>

<span class="token comment"># 截取一个多维数组的一个区域内数据</span>
x <span class="token operator">=</span> nd12<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">:</span><span class="token number">3</span><span class="token punctuation">]</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'nd12[1:3, 1:3]'</span><span class="token punctuation">,</span> x<span class="token punctuation">)</span>
<span class="token comment"># nd12[1:3, 1:3] [[ 6  7]</span>
<span class="token comment">#  [11 12]]</span>

<span class="token comment"># 截取一个多维数组中，数值在一个值域之内的数据</span>
x <span class="token operator">=</span> nd12<span class="token punctuation">[</span><span class="token punctuation">(</span>nd12 <span class="token operator">&gt;</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span> <span class="token punctuation">(</span>nd12 <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'nd12[(nd12 &gt; 3) &amp; (nd12 &lt; 10)]'</span><span class="token punctuation">,</span> x<span class="token punctuation">)</span>  <span class="token comment"># nd12[(nd12 &gt; 3) &amp; (nd12 &lt; 10)] [4 5 6 7 8 9]</span>

<span class="token comment"># 截取多维数组中，指定的行,如读取第2,3行</span>
x <span class="token operator">=</span> nd12<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'nd12[[1, 2]]'</span><span class="token punctuation">,</span> x<span class="token punctuation">)</span>
<span class="token comment"># nd12[[1, 2]] [[ 5  6  7  8  9]</span>
<span class="token comment">#  [10 11 12 13 14]]</span>

<span class="token comment"># 截取多维数组中，指定的列,如读取第2,3列</span>
x <span class="token operator">=</span> nd12<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">:</span><span class="token number">3</span><span class="token punctuation">]</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'nd12[:, 1:3]'</span><span class="token punctuation">,</span> x<span class="token punctuation">)</span>
<span class="token comment"># nd12[:, 1:3] [[ 1  2]</span>
<span class="token comment">#  [ 6  7]</span>
<span class="token comment">#  [11 12]</span>
<span class="token comment">#  [16 17]</span>
<span class="token comment">#  [21 22]]</span>

<span class="token comment"># 截取固定间隔数据</span>
x <span class="token operator">=</span> nd12<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token number">2</span><span class="token punctuation">]</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'nd12[2::2, ::2]'</span><span class="token punctuation">,</span> x<span class="token punctuation">)</span>
<span class="token comment"># nd12[2::2, ::2] [[10 12 14]</span>
<span class="token comment">#  [20 22 24]]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br></div></div><img src="/blog/PyTorch_Learn/numpy-3.jpg" alt="mixureSecure"> <ul><li>通过指定<strong>一些函数</strong>来获取数组中的元素，例如<code>random.choice</code>函数从指定的样本中随机抽取数据</li></ul> <div class="language-python line-numbers-mode"><pre class="language-python"><code>a <span class="token operator">=</span> np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">13</span><span class="token punctuation">,</span> dtype<span class="token operator">=</span><span class="token builtin">float</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>
c1 <span class="token operator">=</span> nr<span class="token punctuation">.</span>choice<span class="token punctuation">(</span>a<span class="token punctuation">,</span> size<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># size指定输出数组形状</span>
c2 <span class="token operator">=</span> nr<span class="token punctuation">.</span>choice<span class="token punctuation">(</span>a<span class="token punctuation">,</span> size<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">,</span> replace<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>  <span class="token comment"># replace缺省为True，即可重复抽取</span>
<span class="token comment"># 下式中参数p指定每个元素对应的抽取概率，缺省为每个元素被抽取的概率相同。</span>
c3 <span class="token operator">=</span> nr<span class="token punctuation">.</span>choice<span class="token punctuation">(</span>a<span class="token punctuation">,</span> size<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">,</span> p<span class="token operator">=</span>a <span class="token operator">/</span> np<span class="token punctuation">.</span><span class="token builtin">sum</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;随机可重复抽取&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>c1<span class="token punctuation">)</span>
<span class="token comment"># [[ 3.  6.  8.  9.]</span>
<span class="token comment">#  [ 6.  5.  1. 12.]</span>
<span class="token comment">#  [ 2.  7. 11.  1.]]</span>

<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;随机但不重复抽取&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>c2<span class="token punctuation">)</span>
<span class="token comment"># [[ 5. 11.  1.  9.]</span>
<span class="token comment">#  [ 8.  2.  6.  4.]</span>
<span class="token comment">#  [10.  7.  3. 12.]]</span>

<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;随机但按制度概率抽取&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>c3<span class="token punctuation">)</span>
<span class="token comment"># [[10.  8.  8.  9.]</span>
<span class="token comment">#  [ 4.  2. 11.  8.]</span>
<span class="token comment">#  [ 3.  9. 11.  9.]]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h2 id="_1-3-numpy的算术运算"><a href="#_1-3-numpy的算术运算" class="header-anchor">#</a> 1.3 NumPy的算术运算</h2> <h3 id="_1-3-1对应元素相乘"><a href="#_1-3-1对应元素相乘" class="header-anchor">#</a> 1.3.1对应元素相乘</h3> <ul><li><code>np.multiply</code>函数格式：
<code>numpy.multiply(x1, x2, /, out=None, *, where=True,casting='same_kind', order='K', dtype=None, subok=True[, signature, extobj])</code></li></ul> <div class="language-python line-numbers-mode"><pre class="language-python"><code>A <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
B <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>A <span class="token operator">*</span> B<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>numpy<span class="token punctuation">.</span>multiply<span class="token punctuation">(</span>A<span class="token punctuation">,</span> B<span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 等价与A*B</span>
<span class="token comment"># [[ 2  0]</span>
<span class="token comment">#  [-3 16]]</span>

<span class="token keyword">print</span><span class="token punctuation">(</span>A <span class="token operator">*</span> <span class="token number">2.0</span><span class="token punctuation">)</span>
<span class="token comment"># [[ 2.  4.]</span>
<span class="token comment">#  [-2.  8.]]</span>

<span class="token keyword">print</span><span class="token punctuation">(</span>A <span class="token operator">/</span> <span class="token number">2.0</span><span class="token punctuation">)</span>
<span class="token comment"># [[ 0.5  1. ]</span>
<span class="token comment">#  [-0.5  2. ]]</span>

X <span class="token operator">=</span> np<span class="token punctuation">.</span>random<span class="token punctuation">.</span>rand<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>


<span class="token keyword">def</span> <span class="token function">softmoid</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> <span class="token number">1</span> <span class="token operator">/</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">+</span> np<span class="token punctuation">.</span>exp<span class="token punctuation">(</span><span class="token operator">-</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span>


<span class="token keyword">def</span> <span class="token function">relu</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> np<span class="token punctuation">.</span>maximum<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> x<span class="token punctuation">)</span>


<span class="token keyword">def</span> <span class="token function">softmax</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> np<span class="token punctuation">.</span>exp<span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token operator">/</span> np<span class="token punctuation">.</span><span class="token builtin">sum</span><span class="token punctuation">(</span>np<span class="token punctuation">.</span>exp<span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span>


<span class="token comment"># 数组通过一些激活函数后，输出和输入形状一致</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;输入参数X的形状：&quot;</span><span class="token punctuation">,</span> X<span class="token punctuation">.</span>shape<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;激活函数softmoid输出形状：&quot;</span><span class="token punctuation">,</span> softmoid<span class="token punctuation">(</span>X<span class="token punctuation">)</span><span class="token punctuation">.</span>shape<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;激活函数relu输出形状：&quot;</span><span class="token punctuation">,</span> relu<span class="token punctuation">(</span>X<span class="token punctuation">)</span><span class="token punctuation">.</span>shape<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;激活函数softmax输出形状：&quot;</span><span class="token punctuation">,</span> softmax<span class="token punctuation">(</span>X<span class="token punctuation">)</span><span class="token punctuation">.</span>shape<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br></div></div><h3 id="_1-3-2-点积运算"><a href="#_1-3-2-点积运算" class="header-anchor">#</a> 1.3.2 点积运算</h3> <ul><li>点积运算格式：<code>numpy.dot(a,b,out=None)</code>       运算规则，即矩阵乘法</li></ul> <div class="language-python line-numbers-mode"><pre class="language-python"><code>X1 <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
X2 <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
X3 <span class="token operator">=</span> np<span class="token punctuation">.</span>dot<span class="token punctuation">(</span>X1<span class="token punctuation">,</span> X2<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>X3<span class="token punctuation">)</span>
<span class="token comment"># [[21 24 27]</span>
<span class="token comment">#  [47 54 61]]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="_1-4-数组变形"><a href="#_1-4-数组变形" class="header-anchor">#</a> 1.4 数组变形</h2> <h3 id="_1-4-1-更改数组的形状"><a href="#_1-4-1-更改数组的形状" class="header-anchor">#</a> 1.4.1 更改数组的形状</h3> <p>NumPy中改变向量形状的一些函数:</p> <img src="/blog/PyTorch_Learn/numpy-4.jpg" alt="mixureSecure"> <ul><li><code>arr.reshape</code> 将向量arr维度进行改变，但是不改变向量本身</li></ul> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token comment"># reshape,改变向量arr维度，但是不改变向量本身</span>
arr <span class="token operator">=</span> np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span>  <span class="token comment"># [ 0  1  2  3  4  5  6  7  8  9 10 11]</span>
<span class="token comment"># 将向量 arr 维度变换为2行6列</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span>reshape<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment"># 指定维度时可以只指定行数或列数, 其他用 -1 代替</span>

<span class="token keyword">print</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span>reshape<span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment"># [[ 0  1]</span>
<span class="token comment">#  [ 2  3]</span>
<span class="token comment">#  [ 4  5]</span>
<span class="token comment">#  [ 6  7]</span>
<span class="token comment">#  [ 8  9]</span>
<span class="token comment">#  [10 11]]</span>

<span class="token keyword">print</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span>reshape<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment"># [[ 0  1  2  3  4  5]</span>
<span class="token comment">#  [ 6  7  8  9 10 11]]</span>

<span class="token keyword">print</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span>reshape<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment"># [[ 0  1  2  3]</span>
<span class="token comment">#  [ 4  5  6  7]</span>
<span class="token comment">#  [ 8  9 10 11]]</span>

<span class="token keyword">print</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span>  <span class="token comment"># [ 0  1  2  3  4  5  6  7  8  9 10 11]</span>
<span class="token comment"># 即不改变向量本身</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><ul><li><code>resize</code> 改变向量<code>arr</code>维度，改变向量本身</li></ul> <div class="language-python line-numbers-mode"><pre class="language-python"><code>arr <span class="token operator">=</span> np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span>
<span class="token comment"># 将向量 arr 维度变换为2行5列</span>
arr<span class="token punctuation">.</span>resize<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span>
<span class="token comment"># 改变向量本身</span>
<span class="token comment"># [[0 1 2 3 4]</span>
<span class="token comment">#  [5 6 7 8 9]]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><ul><li><code>T</code> 对向量<code>arr</code>进行转置</li></ul> <div class="language-python line-numbers-mode"><pre class="language-python"><code>arr <span class="token operator">=</span> np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">.</span>reshape<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span>
<span class="token comment"># 向量 arr 为3行4列</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span>
<span class="token comment"># [[ 0  1  2  3]</span>
<span class="token comment">#  [ 4  5  6  7]</span>
<span class="token comment">#  [ 8  9 10 11]]</span>

<span class="token comment"># 将向量 arr 进行转置为4行3列</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span>T<span class="token punctuation">)</span>
<span class="token comment"># [[ 0  4  8]</span>
<span class="token comment">#  [ 1  5  9]</span>
<span class="token comment">#  [ 2  6 10]</span>
<span class="token comment">#  [ 3  7 11]]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><ul><li><code>ravel</code> 将向量<code>arr</code>展平</li></ul> <div class="language-python line-numbers-mode"><pre class="language-python"><code>arr <span class="token operator">=</span> np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">.</span>reshape<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span>
<span class="token comment"># [[0 1 2]</span>
<span class="token comment">#  [3 4 5]]</span>

<span class="token comment"># 按照列优先，展平</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;按照列优先，展平&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span>ravel<span class="token punctuation">(</span><span class="token string">'F'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># [0 3 1 4 2 5]</span>
<span class="token comment"># 按照行优先，展平</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;按照行优先，展平&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span>ravel<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># [0 1 2 3 4 5]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><ul><li><code>flatten</code> 把矩阵转换为向量，这种需求经常出现在卷积网络与全连接层之间</li></ul> <div class="language-python line-numbers-mode"><pre class="language-python"><code>a <span class="token operator">=</span> np<span class="token punctuation">.</span>floor<span class="token punctuation">(</span><span class="token number">10</span> <span class="token operator">*</span> np<span class="token punctuation">.</span>random<span class="token punctuation">.</span>random<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>
<span class="token comment"># [[1. 3. 8. 6.]</span>
<span class="token comment">#  [4. 1. 5. 0.]</span>
<span class="token comment">#  [6. 3. 5. 2.]]</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>flatten<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># [1. 3. 8. 6. 4. 1. 5. 0. 6. 3. 5. 2.]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ul><li><code>squeeze</code> 用来降维的函数，把矩阵中含1的维度去掉</li></ul> <div class="language-python line-numbers-mode"><pre class="language-python"><code>arr <span class="token operator">=</span> np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">.</span>reshape<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span>shape<span class="token punctuation">)</span>  <span class="token comment"># (3,1)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span>squeeze<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>shape<span class="token punctuation">)</span>  <span class="token comment"># (3,)</span>
arr1 <span class="token operator">=</span> np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">.</span>reshape<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>arr1<span class="token punctuation">.</span>shape<span class="token punctuation">)</span>  <span class="token comment"># (3, 1, 2, 1)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>arr1<span class="token punctuation">.</span>squeeze<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>shape<span class="token punctuation">)</span>  <span class="token comment"># (3, 2)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ul><li><code>transpose</code> 对高维矩阵进行轴对换</li></ul> <div class="language-python line-numbers-mode"><pre class="language-python"><code>arr2 <span class="token operator">=</span> np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token number">24</span><span class="token punctuation">)</span><span class="token punctuation">.</span>reshape<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>arr2<span class="token punctuation">.</span>shape<span class="token punctuation">)</span>  <span class="token comment"># (2, 3, 4)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>arr2<span class="token punctuation">.</span>transpose<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span>shape<span class="token punctuation">)</span>  <span class="token comment"># (3, 4, 2)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="_1-4-2-合并数组"><a href="#_1-4-2-合并数组" class="header-anchor">#</a> 1.4.2 合并数组</h3> <p>NumPy 数组合并方法:</p> <img src="/blog/PyTorch_Learn/numpy-5.jpg" alt="mixureSecure"> <ul><li><code>append</code></li></ul> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token comment"># 合并一维数组：</span>
a <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
b <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
c <span class="token operator">=</span> np<span class="token punctuation">.</span>append<span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span>
<span class="token comment"># [1 2 3 4 5 6]</span>

<span class="token comment"># 合并多维数组：</span>
a <span class="token operator">=</span> np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">.</span>reshape<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
b <span class="token operator">=</span> np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">.</span>reshape<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
<span class="token comment"># 按行合并</span>
c <span class="token operator">=</span> np<span class="token punctuation">.</span>append<span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> axis<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'按行合并后的结果'</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'合并后数据维度'</span><span class="token punctuation">,</span> c<span class="token punctuation">.</span>shape<span class="token punctuation">)</span>  <span class="token comment"># 合并后数据维度 (4, 2)</span>
<span class="token comment"># [[0 1]</span>
<span class="token comment">#  [2 3]</span>
<span class="token comment">#  [0 1]</span>
<span class="token comment">#  [2 3]]</span>

<span class="token comment"># 按列合并</span>
d <span class="token operator">=</span> np<span class="token punctuation">.</span>append<span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> axis<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'按列合并后的结果'</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span>
<span class="token comment"># [[0 1 0 1]</span>
<span class="token comment">#  [2 3 2 3]]</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'合并后数据维度'</span><span class="token punctuation">,</span> d<span class="token punctuation">.</span>shape<span class="token punctuation">)</span>  <span class="token comment"># 合并后数据维度 (2, 4)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><ul><li><code>concatenate</code> 沿指定轴连接数组或矩阵</li></ul> <div class="language-python line-numbers-mode"><pre class="language-python"><code>a <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
b <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment"># 按行连接</span>
c <span class="token operator">=</span> np<span class="token punctuation">.</span>concatenate<span class="token punctuation">(</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">,</span> axis<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span>
<span class="token comment"># [[1 2]</span>
<span class="token comment">#  [3 4]</span>
<span class="token comment">#  [5 6]]</span>

<span class="token comment"># 按列连接</span>
d <span class="token operator">=</span> np<span class="token punctuation">.</span>concatenate<span class="token punctuation">(</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">.</span>T<span class="token punctuation">)</span><span class="token punctuation">,</span> axis<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span>
<span class="token comment"># [[1 2 5]</span>
<span class="token comment">#  [3 4 6]]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><ul><li><code>stack</code> 沿指定轴堆叠数组或矩阵</li></ul> <div class="language-python line-numbers-mode"><pre class="language-python"><code>a <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
b <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment"># 按行堆叠</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>np<span class="token punctuation">.</span>stack<span class="token punctuation">(</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">,</span> axis<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment"># [[[1 2]</span>
<span class="token comment">#   [3 4]]</span>
<span class="token comment">#</span>
<span class="token comment">#  [[5 6]</span>
<span class="token comment">#   [7 8]]]</span>

<span class="token comment"># 按列堆叠</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>np<span class="token punctuation">.</span>stack<span class="token punctuation">(</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">,</span> axis<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment"># [[[1 2]</span>
<span class="token comment">#   [5 6]]</span>
<span class="token comment">#</span>
<span class="token comment">#  [[3 4]</span>
<span class="token comment">#   [7 8]]]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h2 id="_1-5-批量处理"><a href="#_1-5-批量处理" class="header-anchor">#</a> 1.5 批量处理</h2> <p>在深度学习中，由于源数据都比较大，所以通常需要采用批处理。为了更有效的计算，一般将整个数据集分成小批量。实际使用中往往采用批量处理（mini-batch）。
可采用如下步骤<strong>把大数据拆分成多个批次</strong>：
（1）得到数据集
（2）随机打乱数据
（3）定义批大小
（4）批处理数据集
以下我们通过一个示例来具体说明：</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">import</span> numpy <span class="token keyword">as</span> np

<span class="token comment"># 生成10000个形状为2X3的矩阵，生成标准正态分布的随机数</span>
data_train <span class="token operator">=</span> np<span class="token punctuation">.</span>random<span class="token punctuation">.</span>randn<span class="token punctuation">(</span><span class="token number">10000</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>
<span class="token comment"># 这是一个3维矩阵，第一个维度为样本数，后两个是数据形状</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>data_train<span class="token punctuation">.</span>shape<span class="token punctuation">)</span>
<span class="token comment"># (10000,2,3)</span>
<span class="token comment"># 打乱这10000条数据</span>
np<span class="token punctuation">.</span>random<span class="token punctuation">.</span>shuffle<span class="token punctuation">(</span>data_train<span class="token punctuation">)</span>
<span class="token comment"># 定义批量大小</span>
batch_size <span class="token operator">=</span> <span class="token number">100</span>
<span class="token comment"># 进行批处理</span>
<span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>data_train<span class="token punctuation">)</span><span class="token punctuation">,</span> batch_size<span class="token punctuation">)</span><span class="token punctuation">:</span>
    x_batch_sum <span class="token operator">=</span> np<span class="token punctuation">.</span><span class="token builtin">sum</span><span class="token punctuation">(</span>data_train<span class="token punctuation">[</span>i<span class="token punctuation">:</span>i <span class="token operator">+</span> batch_size<span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;第{}批次,该批次的数据之和:{}&quot;</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> x_batch_sum<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h2 id="_1-6-通用函数"><a href="#_1-6-通用函数" class="header-anchor">#</a> 1.6 通用函数</h2> <p>NumPy几个常用通用函数:</p> <img src="/blog/PyTorch_Learn/numpy-6.jpg" alt="mixureSecure"> <ul><li>math与numpy函数的性能比较</li></ul> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token comment"># math与numpy函数的性能比较</span>
<span class="token keyword">import</span> time
<span class="token keyword">import</span> math
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np

x <span class="token operator">=</span> <span class="token punctuation">[</span>i <span class="token operator">*</span> <span class="token number">0.001</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
start <span class="token operator">=</span> time<span class="token punctuation">.</span>perf_counter<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">for</span> i<span class="token punctuation">,</span> t <span class="token keyword">in</span> <span class="token builtin">enumerate</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">:</span>
    x<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> math<span class="token punctuation">.</span>sin<span class="token punctuation">(</span>t<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;math.sin:&quot;</span><span class="token punctuation">,</span> time<span class="token punctuation">.</span>perf_counter<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> start<span class="token punctuation">)</span>  <span class="token comment"># math.sin: 0.44255219999999973</span>

x <span class="token operator">=</span> <span class="token punctuation">[</span>i <span class="token operator">*</span> <span class="token number">0.001</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token number">1000000</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
x <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span>x<span class="token punctuation">)</span>
start <span class="token operator">=</span> time<span class="token punctuation">.</span>perf_counter<span class="token punctuation">(</span><span class="token punctuation">)</span>
np<span class="token punctuation">.</span>sin<span class="token punctuation">(</span>x<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;numpy.sin:&quot;</span><span class="token punctuation">,</span> time<span class="token punctuation">.</span>perf_counter<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> start<span class="token punctuation">)</span>  <span class="token comment"># numpy.sin: 0.013402899999999995</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><ul><li>循环与向量运算比较</li></ul> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token comment"># 循环与向量运算比较</span>
x1 <span class="token operator">=</span> np<span class="token punctuation">.</span>random<span class="token punctuation">.</span>rand<span class="token punctuation">(</span><span class="token number">1000000</span><span class="token punctuation">)</span>
x2 <span class="token operator">=</span> np<span class="token punctuation">.</span>random<span class="token punctuation">.</span>rand<span class="token punctuation">(</span><span class="token number">1000000</span><span class="token punctuation">)</span>
<span class="token comment"># 使用循环计算向量点积</span>
tic <span class="token operator">=</span> time<span class="token punctuation">.</span>process_time<span class="token punctuation">(</span><span class="token punctuation">)</span>
dot <span class="token operator">=</span> <span class="token number">0</span>
<span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>x1<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    dot <span class="token operator">+=</span> x1<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">*</span> x2<span class="token punctuation">[</span>i<span class="token punctuation">]</span>
toc <span class="token operator">=</span> time<span class="token punctuation">.</span>process_time<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;dot = &quot;</span> <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span>dot<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;\n for loop----- Computation time = &quot;</span> <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span><span class="token number">1000</span> <span class="token operator">*</span> <span class="token punctuation">(</span>toc <span class="token operator">-</span> tic<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;ms&quot;</span><span class="token punctuation">)</span>
<span class="token comment"># dot = 250177.84406352817</span>
<span class="token comment">#  for loop----- Computation time = 640.625ms</span>

<span class="token comment"># 使用numpy函数求点积</span>
tic <span class="token operator">=</span> time<span class="token punctuation">.</span>process_time<span class="token punctuation">(</span><span class="token punctuation">)</span>
dot <span class="token operator">=</span> <span class="token number">0</span>
dot <span class="token operator">=</span> np<span class="token punctuation">.</span>dot<span class="token punctuation">(</span>x1<span class="token punctuation">,</span> x2<span class="token punctuation">)</span>
toc <span class="token operator">=</span> time<span class="token punctuation">.</span>process_time<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;dot = &quot;</span> <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span>dot<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;\n vector version---- Computation time = &quot;</span> <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span><span class="token number">1000</span> <span class="token operator">*</span> <span class="token punctuation">(</span>toc <span class="token operator">-</span> tic<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;ms&quot;</span><span class="token punctuation">)</span>
<span class="token comment"># dot = 250177.8440635319</span>
<span class="token comment">#  vector version---- Computation time = 0.0ms</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><h2 id="_1-7-广播机制"><a href="#_1-7-广播机制" class="header-anchor">#</a> 1.7 广播机制</h2> <p>NumPy的Universal functions 中要求输入的数组<code>shape</code>是一致的，当数组的<code>shape</code><strong>不相等</strong>的时候，则会使用<strong>广播机制</strong>。调整数组<code>shape</code>需要满足如下规则：
（1）让所有输入数组都向其中shape最长的数组看齐，shape中不足的部分都通过在前面加1补齐；如：a：2x3x2 b：3x2，则b向a看齐，在b的前面加1：变为：1x3x2
（2）输出数组的shape是输入数组shape的各个轴上的最大值；
（3）如果输入数组的某个轴和输出数组的对应轴的长度相同或者其长度为1时，这个数组能够用来计算，否则出错；
（4）当输入数组的某个轴的长度为1时，沿着此轴运算时都用（或复制）此轴上的第一组值。</p> <p>下面结合图形与代码进一步说明：
目的：A+B
其中A为4x1矩阵，B为一维向量 (3,)
根据规则1，2，4将数组A，B的shape调整为一致，如下是NumPy广播规则示意图：</p> <img src="/blog/PyTorch_Learn/numpy-7.jpg" alt="mixureSecure"> <p>代码实现：</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">import</span> numpy <span class="token keyword">as</span> np

A <span class="token operator">=</span> np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">.</span>reshape<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
B <span class="token operator">=</span> np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;A矩阵的形状:{},B矩阵的形状:{}&quot;</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>A<span class="token punctuation">.</span>shape<span class="token punctuation">,</span> B<span class="token punctuation">.</span>shape<span class="token punctuation">)</span><span class="token punctuation">)</span>
C <span class="token operator">=</span> A <span class="token operator">+</span> B
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;C矩阵的形状:{}&quot;</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>C<span class="token punctuation">.</span>shape<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>C<span class="token punctuation">)</span>
<span class="token comment"># [[ 0  1  2]</span>
<span class="token comment">#  [10 11 12]</span>
<span class="token comment">#  [20 21 22]</span>
<span class="token comment">#  [30 31 32]]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">更新于:</span> <span class="time">10/4/2021, 7:17:45 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/blog/learn/文献阅读笔记/读书阅读记录/数据挖掘概念与技术-3&amp;4.html" class="prev">
        数据挖掘概念与技术-3&amp;4
      </a></span> <span class="next"><a href="/blog/learn/文献阅读笔记/读书阅读记录/Python深度学习基于PyTorch-PyTorch基础.html">
        PyTorch基础
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/blog/assets/js/app.a8766d76.js" defer></script><script src="/blog/assets/js/2.7533f6e6.js" defer></script><script src="/blog/assets/js/90.9088e008.js" defer></script>
  </body>
</html>
